{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport React, { useState, useEffect } from 'react';\nimport Nav from \"./Nav\";\nimport { SafeAreaView } from 'react-native-safe-area-context';\nimport KeyboardAvoidingView from \"react-native-web/dist/exports/KeyboardAvoidingView\";\nimport { ScrollView, TouchableOpacity } from 'react-native-gesture-handler';\nimport { addDoc, collection, collectionGroup, doc, deleteDoc, getDoc, setDoc, onSnapshot, query, where } from \"firebase/firestore\";\nimport { db, auth } from \"../Firebase\";\nimport Divider from 'react-native-elements/dist/divider/Divider';\nimport Icon from \"@expo/vector-icons/Ionicons\";\nimport Icons from \"@expo/vector-icons/FontAwesome5\";\nimport Iconss from \"@expo/vector-icons/AntDesign\";\nimport { EditStack } from \"../Navigation\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\n\nvar RestProfile = function RestProfile() {\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      myCompany = _useState2[0],\n      setMyCompany = _useState2[1];\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      items = _useState4[0],\n      setItems = _useState4[1];\n\n  var company = auth.currentUser;\n  var companyUpperEmail = company.email[0].toUpperCase() + company.email.substring(1);\n  useEffect(function () {\n    var theCompany = query(collection(db, \"companies\"), where(\"email\", \"==\", companyUpperEmail));\n    onSnapshot(theCompany, function (snapshot) {\n      setMyCompany(snapshot.docs.map(function (posts) {\n        return _objectSpread({\n          id: posts.id\n        }, posts.data());\n      }));\n    });\n    return function () {\n      theCompany;\n    };\n  }, []);\n  useEffect(function () {\n    var theItems = query(collection(db, \"items\"), where(\"company\", \"==\", company.email));\n    onSnapshot(theItems, function (snapshot) {\n      setItems(snapshot.docs.map(function (posts) {\n        return _objectSpread({\n          id: posts.id\n        }, posts.data());\n      }));\n    });\n    return function () {\n      theItems;\n    };\n  }, []);\n\n  var handleEdit = function handleEdit() {\n    setEdit(!edit);\n  };\n\n  var _useState5 = useState([]),\n      _useState6 = _slicedToArray(_useState5, 2),\n      orders = _useState6[0],\n      setOrders = _useState6[1];\n\n  var _useState7 = useState(false),\n      _useState8 = _slicedToArray(_useState7, 2),\n      checking = _useState8[0],\n      setChecking = _useState8[1];\n\n  var handleDeleteItem = function handleDeleteItem(item) {\n    var Items, theItems, i;\n    return _regeneratorRuntime.async(function handleDeleteItem$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            Items = query(collection(db, \"orders\"), where(\"itemId\", \"==\", item.id));\n            theItems = query(Items, where(\"orderPlaced\", \"==\", false));\n            onSnapshot(theItems, function (snapshot) {\n              setOrders(snapshot.docs.map(function (posts) {\n                return {\n                  id: posts.id\n                };\n              }));\n            });\n            i = 0;\n\n          case 4:\n            if (!(i < orders.length)) {\n              _context.next = 10;\n              break;\n            }\n\n            _context.next = 7;\n            return _regeneratorRuntime.awrap(deleteDoc(doc(db, \"orders\", orders[i].id)));\n\n          case 7:\n            i++;\n            _context.next = 4;\n            break;\n\n          case 10:\n            if (checking) {\n              deleteDoc(doc(db, \"items\", item.id));\n              console.log('should deleye');\n              setChecking(!checking);\n            } else {\n              setChecking(!checking);\n              alert(\"Are you sure you want to delete this item? Click the trash icon again to confrim.\");\n            }\n\n          case 11:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  return _jsxs(View, {\n    style: {\n      position: 'relative',\n      backgroundColor: \"#faf5e8\",\n      height: \"100%\"\n    },\n    children: [myCompany.map(function (company, index) {\n      return _jsx(Image, {\n        style: {\n          width: \"100%\",\n          height: \"40%\"\n        },\n        source: {\n          uri: company.image\n        }\n      }, index);\n    }), _jsxs(View, {\n      style: {\n        position: 'absolute',\n        width: \"100%\",\n        height: \"100%\",\n        top: \"28%\",\n        backgroundColor: \"#faf5e8\",\n        borderRadius: 50\n      },\n      children: [myCompany.map(function (company, index) {\n        return _jsxs(View, {\n          children: [_jsx(View, {\n            style: {\n              marginHorizontal: 20,\n              flexDirection: 'row',\n              justifyContent: 'space-between',\n              alignItems: 'center',\n              marginTop: 40,\n              marginBottom: 10\n            },\n            children: _jsx(Text, {\n              style: {\n                fontSize: 25,\n                fontWeight: 'bold',\n                width: \"100%\",\n                textAlign: 'center'\n              },\n              children: company.name\n            })\n          }), _jsxs(View, {\n            style: {\n              flexDirection: 'row',\n              width: \"100%\",\n              justifyContent: 'center'\n            },\n            children: [_jsx(View, {\n              style: {\n                backgroundColor: '#e7eddf',\n                paddingHorizontal: 10,\n                paddingVertical: 10,\n                borderRadius: 5,\n                marginHorizontal: 10\n              },\n              children: _jsx(Text, {\n                style: {\n                  fontSize: 13,\n                  color: \"#103d05\"\n                },\n                children: company.address\n              })\n            }), _jsx(View, {\n              style: {\n                marginHorizontal: 20,\n                justifyContent: 'center',\n                alignItems: 'center',\n                borderRadius: 15,\n                backgroundColor: \"green\",\n                height: 30,\n                width: 30\n              },\n              children: company.stars == 0 ? _jsx(Icons, {\n                name: \"utensils\",\n                color: \"white\"\n              }) : _jsx(Text, {\n                style: {\n                  color: \"white\"\n                },\n                children: company.stars\n              })\n            })]\n          })]\n        }, index);\n      }), _jsx(View, {\n        style: {\n          marginVertical: 30,\n          marginHorizontal: 20,\n          alignItems: 'center',\n          flex: 1,\n          paddingBottom: 200\n        },\n        children: _jsx(ScrollView, {\n          children: items.length > 0 ? items.map(function (item, index) {\n            return _jsxs(View, {\n              style: {\n                padding: 15\n              },\n              children: [_jsx(Divider, {}), _jsxs(View, {\n                style: {\n                  flexDirection: 'row',\n                  justifyContent: 'space-between'\n                },\n                children: [_jsx(Text, {\n                  style: {\n                    marginTop: 27,\n                    fontSize: 15,\n                    fontWeight: 'bold'\n                  },\n                  children: item.itemName\n                }), _jsxs(View, {\n                  style: {\n                    flexDirection: 'row',\n                    marginTop: 40,\n                    justifyContent: 'center',\n                    alignItems: \"center\"\n                  },\n                  children: [_jsxs(Text, {\n                    style: {\n                      alignItems: 'center',\n                      fontSize: 17,\n                      fontWeight: 'bold',\n                      marginHorizontal: 5\n                    },\n                    children: [\"$\", item.itemCost]\n                  }), _jsx(TouchableOpacity, {\n                    onPress: function onPress() {\n                      return handleDeleteItem(item);\n                    },\n                    children: _jsx(Iconss, {\n                      color: 'green',\n                      name: \"delete\",\n                      size: 20\n                    })\n                  })]\n                })]\n              }), _jsx(Text, {\n                style: {\n                  fontSize: 15,\n                  minWidth: 280\n                },\n                children: item.itemDescription\n              })]\n            }, index);\n          }) : _jsx(Text, {\n            style: {\n              marginLeft: 10,\n              fontSize: 15\n            },\n            children: \"no items on sale yet... add dishes to your profile!\"\n          })\n        })\n      })]\n    })]\n  });\n};\n\nexport default RestProfile;\n{}","map":{"version":3,"sources":["/Users/vinayasharma/Desktop/krish/screens/Components/RestProfile.js"],"names":["React","useState","useEffect","Nav","SafeAreaView","ScrollView","TouchableOpacity","addDoc","collection","collectionGroup","doc","deleteDoc","getDoc","setDoc","onSnapshot","query","where","db","auth","Divider","Icon","Icons","Iconss","EditStack","RestProfile","myCompany","setMyCompany","items","setItems","company","currentUser","companyUpperEmail","email","toUpperCase","substring","theCompany","snapshot","docs","map","posts","id","data","theItems","handleEdit","setEdit","edit","orders","setOrders","checking","setChecking","handleDeleteItem","item","Items","i","length","console","log","alert","position","backgroundColor","height","index","width","uri","image","top","borderRadius","marginHorizontal","flexDirection","justifyContent","alignItems","marginTop","marginBottom","fontSize","fontWeight","textAlign","name","paddingHorizontal","paddingVertical","color","address","stars","marginVertical","flex","paddingBottom","padding","itemName","itemCost","minWidth","itemDescription","marginLeft"],"mappings":"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","sourcesContent":["import { View, Text, StyleSheet, TextInput, Image } from 'react-native';\nimport React, {useState, useEffect} from 'react';\nimport Nav from './Nav'\nimport { SafeAreaView } from 'react-native-safe-area-context';\nimport { KeyboardAvoidingView } from 'react-native';\nimport { ScrollView, TouchableOpacity } from 'react-native-gesture-handler';\nimport { addDoc, collection, collectionGroup, doc, deleteDoc,getDoc, setDoc,onSnapshot, query, where } from \"firebase/firestore\"; \nimport {db, auth} from \"../Firebase\"\nimport Divider from 'react-native-elements/dist/divider/Divider'\nimport Icon from 'react-native-vector-icons/Ionicons';\nimport Icons from 'react-native-vector-icons/FontAwesome5';\nimport Iconss from 'react-native-vector-icons/AntDesign';\nimport { EditStack } from '../Navigation';\nconst RestProfile = () => {\n  const [myCompany, setMyCompany] = useState([])\n  const [items, setItems] = useState([])\n  let company = auth.currentUser\n\n  let companyUpperEmail = company.email[0].toUpperCase() + company.email.substring(1)\n\n  useEffect(() => {\n    let theCompany = query(collection(db, \"companies\"), where(\"email\", \"==\", companyUpperEmail))\n    onSnapshot(theCompany, (snapshot => {\n        setMyCompany(snapshot.docs.map(posts => ({id:posts.id, ...posts.data()})))\n    }))\n\n    return () => {theCompany}\n  }, []\n  )\n  \n  useEffect(() => {\n    let  theItems = query(collection(db, \"items\"), where(\"company\", \"==\", company.email))\n    onSnapshot(theItems, (snapshot => {\n        setItems(snapshot.docs.map(posts => ({id:posts.id, ...posts.data()})))\n    }))\n    return () => {theItems}\n  }, []\n  )\n\n  const handleEdit = () => {\n    setEdit(!edit)\n  }\n\n  const [orders, setOrders] = useState([])\n  const [checking, setChecking] = useState(false)\n  const handleDeleteItem = async(item) => {\n    \n      let  Items = query(collection(db, \"orders\"), where(\"itemId\", \"==\", item.id))\n      let theItems = query(Items, where(\"orderPlaced\", \"==\", false)) \n      onSnapshot(theItems, (snapshot => {\n          setOrders(snapshot.docs.map(posts => ({id:posts.id})))\n      }))\n\n      for (let i = 0; i < orders.length; i++){\n        await deleteDoc(doc(db, \"orders\", orders[i].id))\n      }\n\n      if (checking){\n        deleteDoc(doc(db, \"items\", item.id))\n        console.log('should deleye')\n        setChecking(!checking)\n      } else {\n        setChecking(!checking)\n        alert(\"Are you sure you want to delete this item? Click the trash icon again to confrim.\")\n      }\n  }\n\n  return (\n    <View style={{position:'relative', backgroundColor:\"#faf5e8\", height:\"100%\"}}>\n      {myCompany.map((company, index) => \n          <Image key={index} style={{width:\"100%\", height:\"40%\"}}  source={{uri:company.image}} />\n        )}\n   \n     \n    <View style={{position:'absolute', width:\"100%\", height:\"100%\",top:\"28%\",backgroundColor:\"#faf5e8\", borderRadius:50}}>\n    \n    {myCompany.map((company, index) => \n    <View key={index}>\n    <View style={{marginHorizontal:20,flexDirection:'row', justifyContent:'space-between', alignItems:'center', marginTop:40, marginBottom:10}}>\n    <Text style ={{fontSize:25, fontWeight:'bold', width:\"100%\",textAlign:'center'}}>{company.name}</Text>\n    </View>\n    <View style={{flexDirection:'row', width:\"100%\", justifyContent:'center'}}>\n      <View style={{backgroundColor:'#e7eddf', paddingHorizontal:10, paddingVertical:10, borderRadius:5, marginHorizontal:10}}>\n      <Text style ={{fontSize:13, color: \"#103d05\"}}>{company.address}</Text>\n      </View>\n                <View style = {{marginHorizontal:20, justifyContent:'center', alignItems:'center',borderRadius:15, backgroundColor: \"green\", height: 30, width: 30}}>\n                 {company.stars==0? \n                 <Icons name='utensils' color={\"white\"} />: <Text style={{color:\"white\"}}>{company.stars}</Text>\n                       }\n               </View>\n    </View>\n    </View>\n    )}\n\n\n<View style={{marginVertical:30, marginHorizontal:20, alignItems:'center', flex:1, paddingBottom:200}}>\n  <ScrollView >\n{items.length > 0 ?\nitems.map((item, index) =>\n<View style={{padding:15}} key={index} >\n  <Divider/>\n  <View style={{flexDirection:'row', justifyContent:'space-between'}}>\n  <Text style ={{marginTop:27, fontSize: 15, fontWeight:'bold'}} >{item.itemName}</Text>\n  <View style={{flexDirection:'row', marginTop:40, justifyContent:'center', alignItems:\"center\"}} >\n   <Text style ={{ alignItems:'center', fontSize: 17, fontWeight:'bold', marginHorizontal:5}} >${item.itemCost}</Text>\n   <TouchableOpacity onPress={() => handleDeleteItem(item)}>\n     <Iconss color={'green'} name='delete' size={20}/>\n   </TouchableOpacity>\n   </View>\n  </View>\n  <Text style ={{fontSize: 15, minWidth:280}} >{item.itemDescription}</Text>\n</View>\n): <Text style = {{marginLeft: 10, fontSize:15}} >no items on sale yet... add dishes to your profile!</Text>}\n</ScrollView>\n</View>\n    </View>\n   </View>\n\n  )\n}\n\nexport default RestProfile\n\n{/*    <SafeAreaView>\n      {myCompany.map((myCompany, index) => \n      <View key= {index} style={{marginBottom:20,padding:10}} >\n      <Image style={{width:370, height:220}}  source={{uri: myCompany.image}}/>\n      <View style = {{flexDirection:'row', alignItems:'center', marginTop:10}} >\n      <View>\n      <Text style ={{fontSize: 15, fontWeight:'bold'}}>{myCompany.name}</Text>\n      <Text style ={{fontSize:13, color: \"grey\"}}>{myCompany.address}</Text>\n      </View>\n      <TouchableOpacity onPress={handleEdit} >\n      <View  style={{ marginLeft:170, alignItems:'center', paddingTop:17}} >\n      <Icons name='user-edit' size={30} />\n      <Text style ={{fontSize:13, color: \"grey\"}}>Edit Profile</Text>\n      </View>\n      </TouchableOpacity>\n    <View style = {{justifyContent:'center', marginLeft:\"auto\",alignItems:'center',borderRadius:15, backgroundColor: \"green\", height: 30, width: 30}}>\n        <Text style={{color:'white'}} >{myCompany.ratings}</Text>\n    </View>\n    </View>\n    </View>\n      )}\n\n<View>\n{items.length > 0 ?\nitems.map((item, index) =>\n<View style={{padding:10}} key={index} >\n  <Divider/>\n  <View style={{flexDirection:'row', justifyContent:'space-between'}}>\n  <Text style ={{marginTop:20, fontSize: 15, fontWeight:'bold'}} >{item.itemName}</Text>\n  <View style={{flexDirection:'row', marginTop:30}}>\n   <Text style ={{marginTop:6, alignItems:'center', fontSize: 17, fontWeight:'bold'}} >${item.itemCost}   </Text>\n   <TouchableOpacity onPress={() => handleDeleteItem(item)}>\n     <Iconss color={'green'} name='delete' size={30}/>\n   </TouchableOpacity>\n   </View>\n  </View>\n  <Text style ={{fontSize: 15}} >{item.itemDescription}</Text>\n</View>\n): <Text style = {{marginLeft: 10, fontSize:15}} >Nothing on sale...Add more to your profile!</Text>}\n</View>\n    </SafeAreaView>*/}"]},"metadata":{},"sourceType":"module"}